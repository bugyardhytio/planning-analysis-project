{
    "collab_server" : "",
    "contents" : "setwd(\"~/R/magangRCUS/penjaringan/data/demografi/per-kerjaan\")\n### data source: \n\n# PRE-ANALYSIS ----\n## Import and Cleaning Data ---------------------------------\ndata2013 <- read_csv(\"penduduk_2013.csv\")\ndata2014 <- read_csv(\"penduduk_2014.csv\")\ndata2015 <- read_csv(\"penduduk_2015.csv\")\ndata2016 <- read_csv(\"penduduk_2016.csv\")\ndata2017 <- read_csv(\"penduduk_2017.csv\")\n\n## Matching column name ----\nnama.kolom <- c(\"tahun\", \"provinsi\", \"kabupaten\", \"kecamatan\", \"kelurahan\", \"pekerjaan\", \"jumlah\")\ndatalist <- list(data2013, data2014, data2015, data2016, data2017)\n\nfor (i in 1:length(datalist)) {\n  colnames(datalist[[i]]) <- nama.kolom\n}\n\n## Joining data ----\ndf <- bind_rows(datalist)\n\ndf <- arrange(df, pekerjaan)\nunique(df$pekerjaan)\n\n## Cleaning Data ----\ndf$pekerjaan <- str_replace(df$pekerjaan, \"DPR-RI\", \"DPR RI\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"DPRD Kabupaten Kota\", \"DPRD Kabupaten/Kota\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Kabinet Menteri\", \"Kabinet/Kementerian\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Kabinet Kementerian\", \"Kabinet/Kementerian\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \" / \", \"/\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Belum/Tidak Bekerja\", \"Belum Bekerja/Tidak Bekerja\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Imam Mesjid\", \"Imam Masjid\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Buruh Nelayan Perikanan\", \"Buruh Nelayan/Perikanan\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Buruh Perternakkan\", \"Buruh Peternakan\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Buruh Tani Perkebunan\", \"Buruh Tani/Perkebunan\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Penerjermah\", \"Penerjemah\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Penterjemah\", \"Penerjemah\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"Tentara Negara Indonesia\", \"Tentara Nasional Indonesia\")\ndf$pekerjaan <- str_replace(df$pekerjaan, \"ustadz/mubaligh\", \"Ustadz/Mubaligh\")\n\n\n\n#EXPLORATORY DATA ANALYSIS ----\n## Setup Variabel -------------------------\njumlahPerKerjaan <- df %>%\n  group_by(tahun, pekerjaan) %>%\n  summarize(jumlah = sum(jumlah, na.rm = TRUE)) %>%\n  ungroup() \n\nsingleyear <- jumlahPerKerjaan %>%\n  group_by(pekerjaan) %>%\n  mutate(n = n()) %>%\n  filter(n == 1) %>%\n  select(pekerjaan) %>%\n  as_vector()\n\nnotSummary <- jumlahPerKerjaan %>%\n  filter(tahun == 2015) %>%\n  distinct(pekerjaan) %>%\n  as_vector()\n\nexplorePerKerjaan <- jumlahPerKerjaan %>%\n  filter(!(pekerjaan %in% singleyear) & !(pekerjaan %in% notSummary)) \n\n\n## Bagaimana erkembangan penduduk per jenis pekerjaan per tahun ----------------\nexplorePerKerjaan %>%\n  ggplot(aes(tahun, jumlah)) +\n  geom_line() +\n  scale_y_log10() +\n  facet_wrap(~pekerjaan)\n\n\n## Pekerjaan apa yang paling banyak dilakukan?--------------------------\nterbanyakPerKerjaan <- explorePerKerjaan %>%\n  group_by(pekerjaan) %>%\n  summarize(avg_jumlah = floor(mean(jumlah))) %>%\n  ungroup()\n\n### Top 10\nterbanyakPerKerjaan %>%\n  arrange(desc(avg_jumlah)) %>%\n  head(10)\n\n### Grafik\nterbanyakPerKerjaan %>%\n  transform(pekerjaan=reorder(pekerjaan, avg_jumlah)) %>%\n  ggplot(aes(pekerjaan, avg_jumlah)) +\n  geom_col() +\n  # Transform log 10\n  scale_y_log10() +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1))\n\n\n## Berapa persen Top 10 dibanding jumlah penduduk --------------------------\n### jumlah penduduk \naggPendKerja <- df %>%\n  group_by(tahun) %>%\n  summarize(jumlah_penduduk = sum(jumlah, na.rm = TRUE))\n\n\n## Variasi spasial ---------------------------------\n### Khusus karyawan swasta (karena paling banyak)\n### Setup\nswasta <- df %>%\n  filter(pekerjaan == \"Karyawan Swasta\") %>%\n  group_by(kabupaten, kecamatan, kelurahan) %>%\n  summarize(avg_swasta = mean(jumlah, na.rm = TRUE)) %>%\n  ungroup()\nswasta$kelurahan <- str_replace(swasta$kelurahan, \"P\\\\.\", \"PULAU\")\nswasta$kelurahan <- str_replace(swasta$kelurahan, \"KUSUMAH\", \"KUSUMA\")\nswasta$kelurahan <- str_replace(swasta$kelurahan, \"KERENDANG\", \"KRENDANG\")\nswasta$kelurahan <- str_replace(swasta$kelurahan, \"BALI MESTER\", \"BALIMESTER\")\nswasta$kelurahan <- str_replace(swasta$kelurahan, \"PAL MERIAM\", \"PALMERIAM\")\nswasta$kelurahan <- str_replace(swasta$kelurahan, \"KAMPUNG TENGAH\", \"TENGAH\")\n\n### df\nkelurahan\nswasta\n\narrange(kelurahan, kelurahan)\narrange(swasta, kelurahan)\nmatch(kelurahan$kelurahan, swasta$kelurahan)\n\n#kenapa bisa ada 377 kelurahan di shp dan 257 kelurahan di dataset?\ntest1 <- kelurahan %>%\n  anti_join(swasta, by = \"kelurahan\")\nunique(test1$kelurahan)\n#gimana cara ngambil vectornya aja?\ntest2 <- swasta %>%\n  anti_join(kelurahan, by = \"kelurahan\")\nunique(test2$kelurahan)\n\nshpSwasta <- kelurahan %>%\n  inner_join(swasta, by = \"kelurahan\")\n\nshpSwasta %>%\n  filter(grepl(\"JAKARTA\", kabupaten)) %>%\n  tm_shape() +\n  tm_fill(col = \"avg_swasta\")",
    "created" : 1551075726757.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1671378097",
    "id" : "F03F7F05",
    "lastKnownWriteTime" : 1551333748,
    "last_content_update" : 1551333748304,
    "path" : "~/R/magangRCUS/penjaringan/data/demografi/analisis-demografi-pekerjaan.R",
    "project_path" : "data/demografi/analisis-demografi-pekerjaan.R",
    "properties" : {
        "docOutlineSize" : "307.91208525599365",
        "docOutlineVisible" : "0"
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}